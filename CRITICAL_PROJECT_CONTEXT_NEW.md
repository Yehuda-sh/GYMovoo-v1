# CRITICAL_PROJECT_CONTEXT_NEW.md

## 🔵 GYMovoo: מדריך עבודה לפיתוח עם AI

**גרסה 5.1 - עדכון אחרון: 21.07.2025**

## מבוא לכלי ה-AI

מסמך זה הוא מקור האמת היחיד (Single Source of Truth) לפיתוח פרויקט GYMovoo. עליך לפעול אך ורק לפי ההנחיות, המבנה והסטנדרטים המוגדרים כאן. קרא והפנם את כל הסעיפים לפני התחלת העבודה.

## 📜 1. כללי הזהב (הנחיות קריטיות)

### 🌍 כלל #1: התאמה מלאה לימין-לשמאל (RTL) - חובה!

זוהי ההנחיה החשובה ביותר בפרויקט. האפליקציה מיועדת לקהל דובר עברית.

- **פריסה (Layout):** השתמש ב-`flexDirection: 'row-reverse'`.
- **טקסט:** יש ליישר לימין (`textAlign: 'right'`).
- **מיקום אלמנטים:** כפתורי פעולה בצד שמאל, תוכן ראשי בצד ימין.
- **אייקונים:** חץ "אחורה" יפנה ימינה (`chevron-forward`).

⚠️ **אזהרה:** קבצים רבים בפרויקט עדיין אינם מיושרים לסטנדרט זה. בכל פעם שאתה עורך קובץ, באחריותך לוודא ולתקן את התאמתו המלאה ל-RTL.

### 📋 כלל #2: תהליך עבודה ותקשורת

1. **אני שולח קוד:** אני (המשתמש) אשלח קובץ מלא או קטע קוד.
2. **אתה מחזיר קוד מלא:** אתה (ה-AI) תמיד תחזיר את הקובץ המלא והמתוקן להעתק-הדבק ישיר.
3. **אני מריץ ובודק:** אני אשלח את כל השגיאות והאזהרות מהטרמינל.
4. **אתה מתקן:** אתה תנתח את השגיאות ותחזיר קובץ מתוקן.
5. **בקשת קבצים קשורים:** אם שגיאה בקובץ A קשורה לקובץ B (למשל, props חסרים), עליך לבקש ממני במפורש לשלוח גם את קובץ B כדי לקבל הקשר מלא.

### 🎨 כלל #3: שימוש ב-Design System בלבד

אסור להשתמש בערכי צבע (hex) או גדלים ישירות בקוד. יש להשתמש אך ורק במשתנים מקובץ theme.ts.

**עדכון חשוב:** החל מגרסה 5.1, יש להשתמש ב-`theme.components` לסגנונות בסיסיים של רכיבים (ראה סעיף 7).

### 🚀 כלל #4: פקודות Git בסיום כל Checkpoint

בסיום כל checkpoint, יסופק בלוק קוד עם פקודות Git מותאמות לטרמינל PowerShell ב-VS Code על Windows 11.

### כלל #5: עבודה עם AI בעל יכולת סריקת פרויקט (כמו Claude)

- **ההקשר אינו מתעדכן בזמן אמת:** ה-AI עובד עם "תמונת מצב" של הפרויקט. הוא אינו סורק שינויים באופן אוטומטי.
- **חובת סנכרון ידני:** לאחר ביצוע git push עם שינויים משמעותיים, באחריותי (המשתמש) להיכנס להגדרות הפרויקט ב-AI ולבצע סנכרון מחדש (Re-sync) של המאגר.
- **סדר פעולות:** קודם git push ← אחר כך סנכרון ידני ב-AI ← ורק אז התחלת שיחה חדשה על הקוד המעודכן.

### כלל #6: הערכת אורך השיחה והתראה

זוהי הנחיה משנית, אך חשובה למניעת איבוד הקשר (context). מכיוון שאין לך יכולת מדויקת למדוד את ניצול הזיכרון, עליך לבצע הערכה כללית.

**אופן הפעולה:**
בכל פעם שאני משתמש בפקודה "checkpoint" או "קומיט", בנוסף לעדכון קובץ ה-PROGRESS_LOG, עליך להוסיף בסוף תגובתך משפט קצר המעריך את אורך השיחה הנוכחית.

**נוסח ההערכה:**

- אם השיחה נראית קצרה יחסית: "הערכה: השיחה עדיין בתחומיה הבטוחים."
- אם השיחה מתחילה להרגיש ארוכה (לדוגמה, אחרי מספר רב של קטעי קוד ארוכים ותיקונים): "אזהרה: השיחה מתארכת. מומלץ לבצע קומיט ולשקול התחלת שיחה חדשה עם ההקשר העדכני כדי למנוע איבוד מידע."

**מטרה:** תפקידך הוא לשמש כ"קוצב לב" ולסמן לי מתי כדאי לסיים את האינטראקציה הנוכחית ולפתוח אחת חדשה ורעננה, כדי להבטיח שלא נאבד את ההקשר הקריטי של הפרויקט.

## ✍️ 2. סטנדרט תיעוד בראש כל קובץ

כל קובץ קומפוננטה, hook או שירות יתחיל עם בלוק התיעוד הבא. זה קריטי להבנת ההקשר.

```
/**
 * @file [הנתיב המלא לקובץ, למשל: src/screens/workout/components/ExerciseCard.tsx]
 * @brief [תקציר במשפט אחד: מה הרכיב הזה עושה? למשל: "כרטיס תרגיל המציג סטים ופעולות."]
 * @dependencies [על אילו רכיבים/קבצים אחרים הוא מסתמך? למשל: "SetRow, ExerciseMenu"]
 * @notes [הערות מיוחדות: למשל: "מכיל לוגיקת אנימציה מורכבת לפתיחה וסגירה."]
 * @recurring_errors [שגיאות נפוצות בקובץ זה שיש לשים לב אליהן, למשל: "שכחה להעביר את ה-prop isPaused ל-RestTimer"]
 */
```

## 🛠️ 3. טכנולוגיות וסגנון קוד

- **Tech Stack:** React Native, Expo, TypeScript, Zustand, React Navigation, AsyncStorage.
- **UI Library:** רכיבים מותאמים אישית בלבד.
- **Code Style:**
  - **שפה:** קוד באנגלית.
  - **הערות:** תמיד דו-לשוניות (עברית ואז אנגלית).
  - **TypeScript:** אסור להשתמש ב-any.
  - **קומפוננטות:** פונקציונליות בלבד, עם פירוק של רכיבים מורכבים.

## 🤖 4. מצבי עבודה עם AI

ישנם שני מצבי עבודה אפשריים, בהתאם ליכולות שלך:

### א. מצב קבצים בודדים (File-by-File):

- זוהי ברירת המחדל.
- ההקשר שלך מבוסס אך ורק על הקבצים שאני שולח בשיחה הנוכחית.
- עליך להקפיד על כלל #2, סעיף 5 ולבקש קבצים נוספים בעת הצורך.

### ב. מצב סריקת פרויקט מלא (Full Repo Context):

- אם יש לך גישה לסרוק את כל מאגר ה-GitHub של הפרויקט, הודע לי על כך.
- במצב זה, באחריותך לסרוק את הקבצים הרלוונטיים כדי להבין את הקשרים ביניהם ולמנוע שגיאות props או import.
- גם במצב זה, התשובות שלך יתמקדו רק בקבצים שביקשתי לערוך.

## 🎨 5. הנחיות עיצוב מודרני (עדכון 21.07.2025)

העיצוב של האפליקציה מבוסס על הסגנון המודרני של מסכי האימון (Workout screens).

### מאפייני עיצוב עיקריים:

- **כרטיסים:** `borderRadius: 16`, רקע `card` עם מסגרת `cardBorder`
- **צללים:** השתמש ב-`shadows.medium` כברירת מחדל
- **כפתורים:** ריפוד של 12-16 פיקסלים, `borderRadius: 16`
- **מרווחים:** השתמש במשתני `spacing` מה-theme
- **אייקונים:** השתמש ב-`MaterialCommunityIcons` מ-`@expo/vector-icons`

### דוגמאות לרכיבים נפוצים:

#### כרטיס תרגיל:

```
exerciseCard: {
  flexDirection: "row-reverse",
  backgroundColor: theme.colors.card,
  borderRadius: 16,
  padding: 16,
  borderWidth: 1,
  borderColor: theme.colors.cardBorder,
  ...theme.shadows.medium,
}
```

#### כפתור ראשי:

```
primaryButton: {
  backgroundColor: theme.colors.primary,
  paddingHorizontal: 32,
  paddingVertical: 12,
  borderRadius: 16,
  ...theme.shadows.medium,
}
```

#### תג מידע (Badge):

```
badge: {
  backgroundColor: theme.colors.primaryGradientStart + "20",
  paddingHorizontal: 8,
  paddingVertical: 4,
  borderRadius: 8,
}
```

## 📦 6. שימוש ב-theme.components (חדש!)

החל מגרסה 5.1, קובץ `theme.ts` כולל סעיף `components` עם סגנונות בסיסיים מוכנים.

### רכיבים זמינים:

- `theme.components.card` - סגנון בסיסי לכרטיסים
- `theme.components.exerciseCard` - כרטיס תרגיל עם RTL
- `theme.components.primaryButton` - כפתור ראשי
- `theme.components.secondaryButton` - כפתור משני
- `theme.components.actionButton` - כפתור פעולה קטן
- `theme.components.badge` - תגית מידע
- `theme.components.input` - שדה קלט
- `theme.components.modalContainer` - מכל למודלים
- `theme.components.screenHeader` - כותרת מסך
- `theme.components.listContent` - ריפוד לרשימות
- `theme.components.emptyState` - מצב ריק
- `theme.components.rtlText` - טקסט עברי

### איך להשתמש:

```
const styles = StyleSheet.create({
  myCard: {
    ...theme.components.card,
    // הוספת/שינוי properties ספציפיים
    marginBottom: 20,
  }
});
```

## 🔍 7. בדיקות איכות לפני הגשה

לפני החזרת קוד, וודא:

1. ✅ RTL מיושם במלואו
2. ✅ כל הצבעים והגדלים מה-theme
3. ✅ תיעוד בראש הקובץ
4. ✅ הערות דו-לשוניות
5. ✅ עיצוב תואם למסכי Workout
6. ✅ שימוש ב-theme.components היכן שרלוונטי

## 📁 8. עקרונות ארגון קוד ונתונים

### מבנה קבצים מודולרי

- **הפרד נתונים מלוגיקה:** צור קבצי data נפרדים (כמו `questionnaireData.ts`) במקום לשלב נתונים בתוך קומפוננטות
- **ריכוז נתונים:** כל השאלות, אופציות, וקונפיגורציות במקום אחד לתחזוקה קלה
- **ייצוא פונקציות עזר:** כמו `getRelevantQuestions()`, `getEquipmentImage()` בקובץ הנתונים

### רכיבים אינטראקטיביים מותאמים

- **העדף רכיבים ויזואליים על פני קלט טקסט:** סרגלי גרירה לגובה/משקל במקום input fields
- **התאמת כיוון לנתון:** סרגל אנכי לגובה (אינטואיטיבי), סרגל אופקי למשקל (כמו ציר)
- **משוב מיידי:** הצגת BMI בזמן בחירת משקל, הצגת "ממוצע/גבוה/נמוך" בבחירת גובה

### גישת פיתוח מדורגת

- **תמונות זמניות:** השתמש ב-URLs חיצוניים `{ uri: "https://..." }` בשלב הפיתוח
- **החלפה קלה:** מבנה שמאפשר מעבר פשוט לתמונות מקומיות `require("../../assets/...")`
- **בדיקת פונקציונליות לפני עיצוב:** "קודם לראות שזה עובד, אחר כך להחליף לתמונות מקצועיות"

## 🎯 9. עקרונות UX וחווית משתמש

### שאלות דינמיות וחכמות

- **התאמה לקונטקסט:** שאלות משתנות לפי תשובות קודמות (ציוד שונה לבית/חדר כושר)
- **מניעת שאלות לא רלוונטיות:** אם בחר "ירידה במשקל" - שאל כמה ק"ג, לא שאלות על בניית שריר
- **זרימה לוגית:** סדר שאלות שמוביל מכללי לספציפי

### נגישות ללא גלילה

- **חוק ברזל:** כל מסך (מלבד מסך אימון) חייב להיות נגיש במלואו ללא גלילה
- **התאמת גדלים:** רכיבים כמו סרגלים מוגבלים ל-35% מגובה המסך
- **כפתורי פעולה תמיד נגישים:** כפתור "המשך" תמיד נראה בתחתית המסך

### ברירות מחדל חכמות והדגשות

- **ברירות מחדל לפי הגיון:** "ללא ציוד" בבית, "משקולות חופשיות" בחדר כושר
- **הדגשת ציוד מומלץ:** תגיות "פרימיום" עם המלצות לשיפור התוצאות
- **מסרים מעודדים:** "💡 שקול רכישת ציוד נוסף לאימונים מגוונים"

### בדיקת imports ונתיבים

- **תמיד וודא מיקום קבצים:** לפני כתיבת imports, בדוק היכן נמצאים הקבצים
- **העדף imports יחסיים:** `./ComponentName` כשהקבצים באותה תיקייה
- **שגיאות נפוצות:** שים לב במיוחד לקבצים בתיקיות questionnaire vs components
