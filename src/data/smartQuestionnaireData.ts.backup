/**
 * @file src/data/smartQuestionnaireData.ts
 * @brief ×©××œ×•×Ÿ ×—×›× ×××•×—×“ ×¢× ××©×•×‘ AI ×‘×–××Ÿ ×××ª
 * @description ×”××‘×•×œ×•×¦×™×” ×”×‘××” ×©×œ ××¢×¨×›×ª ×”×©××œ×•× ×™× - ×©××œ×•×Ÿ ××—×“ ×—×›× ×¢× AI
 * @author AI Assistant
 * @date 2025-07-29
 */

import { ImageSourcePropType } from "react-native";

// ×˜×™×¤×•×¡×™× ×‘×¡×™×¡×™×™×
export type SmartQuestionType =
  | "single"
  | "multiple"
  | "slider"
  | "location_equipment"
  | "time_preference"
  | "goal_focused"
  | "experience_assessment";

// ×××©×§ ×œ××©×•×‘ AI
export interface AIFeedback {
  message: string;
  type: "positive" | "suggestion" | "warning" | "insight";
  icon: string;
  actionable?: {
    text: string;
    action: () => void;
  };
}

// ×××©×§ ×œ××¤×©×¨×•×ª ××ª×§×“××ª
export interface SmartOption {
  id: string;
  label: string;
  description?: string;
  image?: ImageSourcePropType;
  metadata?: {
    equipment?: string[];
    intensity?: "low" | "medium" | "high" | "adaptive" | "varied";
    focus?: string[];
    recommendation?: string;
    modifications?: string[];
    style?: string[];
  };
  aiInsight?: string; // ×ª×•×‘× ×” ××™×•×—×“×ª ××”-AI
}

// ×××©×§ ×œ×©××œ×” ×—×›××”
export interface SmartQuestion {
  id: string;
  title: string;
  subtitle?: string;
  question: string;
  type: SmartQuestionType;
  icon: string;
  category: "essential" | "optimization" | "personalization";

  // ××¤×©×¨×•×™×•×ª
  options?: SmartOption[];

  // ×”×’×“×¨×•×ª ××™×•×—×“×•×ª
  settings?: {
    min?: number;
    max?: number;
    step?: number;
    unit?: string;
  };

  // ×œ×•×’×™×§×” ×©×œ AI
  aiLogic: {
    generateFeedback: (answer: any, previousAnswers: any) => AIFeedback;
    influenceNextQuestions?: (answer: any) => string[]; // ××™×œ×• ×©××œ×•×ª ×œ×”×¦×™×’ ×”×‘×
    generateRecommendations?: (answer: any, previousAnswers: any) => string[];
  };

  // ××ª×™ ×œ×”×¦×™×’ ××ª ×”×©××œ×”
  showCondition?: (previousAnswers: any) => boolean;

  required: boolean;
  helpText?: string;
}

// ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×œ××©×•×‘ AI ×—×›×
const AIFeedbackGenerator = {
  // ××©×•×‘ ×—×™×•×‘×™ ×›×œ×œ×™
  positive: (message: string, insight?: string): AIFeedback => ({
    message,
    type: "positive",
    icon: "âœ¨",
    ...(insight && { actionable: { text: insight, action: () => {} } }),
  }),

  // ×”×¦×¢×” ×œ×©×™×¤×•×¨
  suggestion: (message: string, actionText?: string): AIFeedback => ({
    message,
    type: "suggestion",
    icon: "ğŸ’¡",
    ...(actionText && { actionable: { text: actionText, action: () => {} } }),
  }),

  // ×ª×•×‘× ×” ××¢××™×§×”
  insight: (message: string): AIFeedback => ({
    message,
    type: "insight",
    icon: "ğŸ¯",
  }),

  // ××–×”×¨×” ×¢×“×™× ×”
  warning: (message: string): AIFeedback => ({
    message,
    type: "warning",
    icon: "âš ï¸",
  }),
};

// ğŸ¯ ×”×©××œ×•×ª ×”×—×›××•×ª ×”×—×“×©×•×ª
export const SMART_QUESTIONNAIRE: SmartQuestion[] = [
  // ×©××œ×” 1: ××™×§×•× ××™××•×Ÿ ×¤×©×•×˜
  // ========== ğŸ“ EQUIPMENT AVAILABILITY - ×–××™× ×•×ª ×¦×™×•×“ ==========
  {
    id: "equipment_availability",
    title: "××™×–×” ×¦×™×•×“ ×–××™×Ÿ ×œ×š?",
    subtitle: "× ×ª×—×™×œ ×¢× ×”×‘×¡×™×¡ - ××” ×™×© ×œ×š ×œ××™××•× ×™×?",
    question: "××™×–×” ×¦×™×•×“ ×–××™×Ÿ ×œÙƒ ×œ××™××•× ×™×?",
    type: "single",
    icon: "ğŸ‹ï¸",
    category: "essential",
    required: true,

    options: [
      {
        id: "no_equipment",
        label: "×œ×œ× ×¦×™×•×“ (×¨×§ ××©×§×œ ×’×•×£)",
        description: "××™××•× ×™× ×¢× ××©×§×œ ×”×’×•×£ ×‘×œ×‘×“",
        aiInsight:
          "××¢×•×œ×”! ××©×§×œ ×’×•×£ ×–×” ×”×›×™ ×˜×‘×¢×™ ×•×™×¢×™×œ - × ×›×™×Ÿ ×œ×š ××™××•× ×™× ××“×”×™××™×!",
      },
      {
        id: "home_equipment",
        label: "×™×© ×œ×™ ×¦×™×•×“ ×‘×‘×™×ª",
        description: "×“××‘×œ×™×, ×’×•××™×•×ª, ××• ×¦×™×•×“ ×‘×™×ª×™ ××—×¨",
        aiInsight: "× ×”×“×¨! ×¦×™×•×“ ×‘×™×ª×™ ×¤×•×ª×— ×”×¨×‘×” ××¤×©×¨×•×™×•×ª - ×‘×•× × ×¨××” ××” ×™×© ×œ×š",
      },
      {
        id: "gym_access",
        label: "×™×© ×œ×™ ×’×™×©×” ×œ×—×“×¨ ×›×•×©×¨",
        description: "×× ×•×™ ×‘×—×“×¨ ×›×•×©×¨ ××• ×’×™×©×” ×œ×¦×™×•×“ ××§×¦×•×¢×™",
        aiInsight: "××•×©×œ×! ×—×“×¨ ×›×•×©×¨ × ×•×ª×Ÿ ××’×•×•×Ÿ ×¦×™×•×“ ××“×”×™× - ×‘×•× × ×¨××” ××” ×–××™×Ÿ",
      },
      {
        id: "outdoor_equipment",
        label: "××ª×××Ÿ ×‘×—×•×¥ ×¢× ×¦×™×•×“ × ×™×™×“",
        description: "×¤××¨×§, ×˜×‘×¢, ×¢× ×¦×™×•×“ ×©××¤×©×¨ ×œ×§×—×ª ×”×—×•×¦×”",
        aiInsight: "××”×‘×ª×™! ××™××•× ×™× ×‘×˜×‘×¢ ×¢× ×¦×™×•×“ × ×™×™×“ ×–×” ×©×™×œ×•×‘ ×× ×¦×—",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;
        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          option.id === "no_equipment"
            ? "× ×ª×—×™×œ ×œ×‘× ×•×ª ×ª×•×›× ×™×ª ××™××•× ×™× ××•×ª×××ª ×‘×œ×™ ×¦×™×•×“!"
            : "×¢×›×©×™×• × ×¨××” ×‘×“×™×•×§ ××™×–×” ×¦×™×•×“ ×™×© ×œ×š"
        );
      },

      influenceNextQuestions: (answer) => {
        const option = answer as SmartOption;
        
        console.log("ğŸ” influenceNextQuestions called with:", option);

        // ×¨×§ ×× ×™×© ×¦×™×•×“ - × ×©××œ ××™×–×” ×¦×™×•×“
        switch (option?.id) {
          case "home_equipment":
            console.log("ğŸ” Returning home_equipment_specific");
            return ["home_equipment_specific"];
          case "gym_access":
            console.log("ğŸ” Returning gym_equipment_specific");
            return ["gym_equipment_specific"];
          case "outdoor_equipment":
            console.log("ğŸ” Returning outdoor_equipment_specific");
            return ["outdoor_equipment_specific"];
          case "no_equipment":
            console.log("ğŸ” Returning empty array for no_equipment");
            // ×× ××™×Ÿ ×¦×™×•×“ - ×œ× × ×©××œ ×©××œ×•×ª × ×•×¡×¤×•×ª ×¢×œ ×¦×™×•×“
            return [];
          default:
            console.log("ğŸ” Unknown option, returning empty array");
            return [];
        }
      },
    },

    helpText: "×–×” ×™×§×‘×¢ ××™×–×” ×¦×™×•×“ × ×¦×™×¢ ×œ×š ×‘×©××œ×” ×”×‘××”",
  },

  // ========== ğŸ  HOME EQUIPMENT SPECIFIC - ×¦×™×•×“ ×‘×™×ª×™ ×¡×¤×¦×™×¤×™ ==========
  {
    id: "home_equipment_specific",
    title: "××™×–×” ×¦×™×•×“ ×™×© ×œ×š ×‘×‘×™×ª?",
    subtitle: "×‘×—×¨ ×¨×§ ××” ×©×‘×××ª ×™×© ×œ×š ××• ××” ×©××ª×” ××•×›×Ÿ ×œ×§× ×•×ª",
    question: "××™×–×” ×¦×™×•×“ ×–××™×Ÿ ×œ×š ×œ××™××•× ×™× ×‘×‘×™×ª?",
    type: "multiple",
    icon: "ğŸ ",
    category: "essential",
    required: true,

    options: [
      {
        id: "bodyweight_only",
        label: "×¨×§ ××©×§×œ ×’×•×£",
        description: "××™×Ÿ ×¦×™×•×“ × ×•×¡×£, ×¨×§ ××•×˜×™×‘×¦×™×”!",
        image: require("../../assets/bodyweight.png"),
        metadata: { equipment: ["bodyweight"] },
        aiInsight: "××©×§×œ ×’×•×£ ×–×” ×”×›×™ ×˜×‘×¢×™ ×•×™×¢×™×œ!",
      },
      {
        id: "yoga_mat",
        label: "××–×¨×Ÿ ×™×•×’×”",
        description: "×‘×¡×™×¡ × ×•×— ×œ×ª×¨×’×™×œ×™ ×¨×¦×¤×”",
        image: require("../../assets/yoga_mat.png"),
        metadata: { equipment: ["yoga_mat"] },
        aiInsight: "× ×•×—×•×ª ×•×™×¦×™×‘×•×ª ×œ×ª×¨×’×™×œ×™ ×œ×™×‘×” ××•×©×œ××™×",
      },
      {
        id: "dumbbells",
        label: "×“××‘×œ×™×/××©×§×•×œ×•×ª",
        description: "××©×§×•×œ×•×ª ×§×˜× ×•×ª ××• ×“××‘×œ×™× ××ª×›×•×•× × ×™×",
        image: require("../../assets/dumbbells.png"),
        metadata: { equipment: ["dumbbells"] },
        aiInsight: "×”×¦×™×•×“ ×”×›×™ ×’××™×© ×œ××™××•× ×™ ×›×•×— ×‘×‘×™×ª!",
      },
      {
        id: "resistance_bands",
        label: "×’×•××™×•×ª ×”×ª× ×’×“×•×ª",
        description: "×’×•××™×•×ª ×œ×—×™×–×•×§ ×•××ª×™×—×”",
        image: require("../../assets/resistance_bands.png"),
        metadata: { equipment: ["resistance_bands"] },
        aiInsight: "×§×œ×•×ª ×œ××—×¡×•×Ÿ ×•×™×¢×™×œ×•×ª ××“×”×™××”!",
      },
      {
        id: "kettlebell",
        label: "×§×˜×œ×‘×œ",
        description: "××©×§×•×œ×ª ×¢× ×™×“×™×ª ×œ×ª×¨×’×™×œ×™× ×“×™× ××™×™×",
        image: require("../../assets/kettlebell.png"),
        metadata: { equipment: ["kettlebell"] },
        aiInsight: "×›×•×— + ×§×¨×“×™×• + ×œ×™×‘×” ×‘×›×œ×™ ××—×“!",
      },
      {
        id: "pullup_bar",
        label: "××•×˜ ××ª×—",
        description: "××•×˜ ×œ××ª×— ××ª×§×‘×¢ ×¢×œ ×”×“×œ×ª",
        image: require("../../assets/pullup_bar.png"),
        metadata: { equipment: ["pullup_bar"] },
        aiInsight: "×¤×ª×— ×¢×•×œ× ×©×œ× ×©×œ ×ª×¨×’×™×œ×™ ×’×‘ ×•×–×¨×•×¢×•×ª!",
      },
      {
        id: "foam_roller",
        label: "×’×œ×’×œ ××¡××–'",
        description: "×œ×©×—×¨×•×¨ ×©×¨×™×¨×™× ×•×”×ª××•×©×©×•×ª",
        image: require("../../assets/foam_roller.png"),
        metadata: { equipment: ["foam_roller"] },
        aiInsight: "×”×ª××•×©×©×•×ª ×—×›××” ××•× ×¢×ª ×¤×¦×™×¢×•×ª!",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const options = answer as SmartOption[];
        const count = Array.isArray(options) ? options.length : 0;

        if (count === 0) {
          return AIFeedbackGenerator.suggestion(
            "×‘×—×¨ ×œ×¤×—×•×ª ××¤×©×¨×•×ª ××—×ª ×›×“×™ ×©× ×•×›×œ ×œ×‘× ×•×ª ×œ×š ×ª×•×›× ×™×ª ××•×ª×××ª"
          );
        } else if (count === 1 && options[0]?.id === "bodyweight_only") {
          return AIFeedbackGenerator.positive(
            "××¢×•×œ×”! × ×›×™×Ÿ ×œ×š ××™××•× ×™ ××©×§×œ ×’×•×£ ×™×¢×™×œ×™× ×•××’×•×•× ×™×",
            "×¨×‘×™× ××”××ª×œ×˜×™× ×”×˜×•×‘×™× ×‘×¢×•×œ× ××ª×—×™×œ×™× ×¢× ××©×§×œ ×’×•×£ ×‘×œ×‘×“"
          );
        } else {
          return AIFeedbackGenerator.insight(
            `× ×”×“×¨! ×¢× ${count} ×¡×•×’×™ ×¦×™×•×“ × ×•×›×œ ×œ×™×¦×•×¨ ××™××•× ×™× ××’×•×•× ×™× ×•×××ª×’×¨×™×`
          );
        }
      },
    },

    helpText: "××¤×©×¨ ×œ×‘×—×•×¨ ×›××” ××¤×©×¨×•×™×•×ª. ×¦×™×•×“ × ×•×¡×£ = ××™××•× ×™× ××’×•×•× ×™× ×™×•×ª×¨",
  },

  // ========== ğŸ‹ï¸â€â™‚ï¸ GYM EQUIPMENT SPECIFIC - ×¦×™×•×“ ×—×“×¨ ×›×•×©×¨ ×¡×¤×¦×™×¤×™ ==========
  {
    id: "gym_equipment_specific",
    title: "××™×–×” ×¦×™×•×“ ×™×© ×‘×—×“×¨ ×”×›×•×©×¨ ×©×œ×š?",
    subtitle: "×‘×—×¨ ××ª ×”×¦×™×•×“ ×”×–××™×Ÿ ××• ×©××ª×” ××•×”×‘ ×œ×”×©×ª××© ×‘×•",
    question: "××™×–×” ×¦×™×•×“ ×–××™×Ÿ ×œ×š ×‘×—×“×¨ ×”×›×•×©×¨?",
    type: "multiple",
    icon: "ğŸ‹ï¸â€â™‚ï¸",
    category: "essential",
    required: true,

    options: [
      {
        id: "free_weights",
        label: "××©×§×•×œ×•×ª ×—×•×¤×©×™×•×ª",
        description: "×“××‘×œ×™×, ×‘×¨×‘×œ×™×, ×¦×œ×—×•×ª ××©×§×œ",
        image: require("../../assets/free_weights.png"),
        metadata: { equipment: ["dumbbells", "barbell"] },
        aiInsight: "×”×‘×¡×™×¡ ×©×œ ×›×œ ××™××•×Ÿ ×›×•×— ×¨×¦×™× ×™!",
      },
      {
        id: "bench_press",
        label: "×¡×¤×¡×œ ×œ×—×™×¦×”",
        description: "×¡×¤×¡×œ ××ª×›×•×•× ×Ÿ ×œ×ª×¨×’×™×œ×™ ×—×–×” ×•×›×ª×¤×™×™×",
        image: require("../../assets/bench.png"),
        metadata: { equipment: ["bench"] },
        aiInsight: "×—×™×•× ×™ ×œ××™××•× ×™ ×—×–×” ×•×›×ª×¤×™×™× ××™×›×•×ª×™×™×!",
      },
      {
        id: "squat_rack",
        label: "××ª×§×Ÿ ×¡×§×•×•××˜",
        description: "××“×£ ×œ×‘×¨×‘×œ ×¢× ××’× ×™ ×‘×˜×™×—×•×ª",
        image: require("../../assets/squat_rack.png"),
        metadata: { equipment: ["squat_rack"] },
        aiInsight: "×”××œ×š ×©×œ ×ª×¨×’×™×œ×™ ×”×¨×’×œ×™×™×!",
      },
      {
        id: "cable_machine",
        label: "××›×•× ×ª ×›×‘×œ×™×",
        description: "××¢×¨×›×ª ×¤×•×œ×™ ×¨×‘-×ª×›×œ×™×ª×™×ª",
        image: require("../../assets/cable_machine.png"),
        metadata: { equipment: ["cable_machine"] },
        aiInsight: "×’××™×©×•×ª ××™× ×¡×•×¤×™×ª ×œ×›×œ ×§×‘×•×¦×•×ª ×”×©×¨×™×¨×™×!",
      },
      {
        id: "leg_press",
        label: "××›×•× ×ª ×œ×’ ×¤×¨×¡",
        description: "××›×•× ×” ×œ×œ×—×™×¦×ª ×¨×’×œ×™×™×",
        image: require("../../assets/leg_press.png"),
        metadata: { equipment: ["leg_press"] },
        aiInsight: "×‘×˜×™×—×•×ª ×•×›×•×— ××§×¡×™××œ×™ ×œ×¨×’×œ×™×™×!",
      },
      {
        id: "lat_pulldown",
        label: "××›×•× ×ª ×œ×˜ ×¤×•×œ×“××•×Ÿ",
        description: "××©×™×›×” ×œ××˜×” ×œ×©×¨×™×¨×™ ×”×’×‘",
        image: require("../../assets/lat_pulldown.png"),
        metadata: { equipment: ["lat_pulldown"] },
        aiInsight: "××•×©×œ××ª ×œ×¤×™×ª×•×— ×’×‘ ×¨×—×‘ ×•×—×–×§!",
      },
      {
        id: "chest_press",
        label: "××›×•× ×ª ×—×–×”",
        description: "×œ×—×™×¦×ª ×—×–×” ×‘××›×•× ×” ××•× ×—×™×ª",
        image: require("../../assets/chest_press.png"),
        metadata: { equipment: ["chest_press"] },
        aiInsight: "×‘×˜×•×—×” ×•×™×¢×™×œ×” ×œ×¤×™×ª×•×— ×©×¨×™×¨×™ ×”×—×–×”!",
      },
      {
        id: "smith_machine",
        label: "××›×•× ×ª ×¡××™×ª'",
        description: "×‘×¨×‘×œ ××•× ×—×” ×¢×œ ××¡×™×œ×•×ª",
        image: require("../../assets/smith_machine.png"),
        metadata: { equipment: ["smith_machine"] },
        aiInsight: "×‘×˜×™×—×•×ª ××§×¡×™××œ×™×ª ×¢× ×¢×•××¡×™× ×›×‘×“×™×!",
      },
      {
        id: "cardio_machines",
        label: "××›×•× ×•×ª ×§×¨×“×™×•",
        description: "×”×œ×™×›×•×Ÿ, ××œ×™×¤×˜×™×§×œ, ×¨×•××™× ×’",
        image: require("../../assets/treadmill.png"),
        metadata: { equipment: ["treadmill", "rowing_machine"] },
        aiInsight: "×—×™×•× ×™×•×ª ×œ×—×™××•×, ×§×™×¨×•×¨ ×•××™××•× ×™ ×¡×™×‘×•×œ×ª!",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const options = answer as SmartOption[];
        const count = Array.isArray(options) ? options.length : 0;

        if (count === 0) {
          return AIFeedbackGenerator.suggestion(
            "×‘×—×¨ ××ª ×”×¦×™×•×“ ×”×–××™×Ÿ ×‘×—×“×¨ ×”×›×•×©×¨ ×©×œ×š"
          );
        } else if (count >= 5) {
          return AIFeedbackGenerator.insight(
            "×—×“×¨ ×›×•×©×¨ ××¦×•×™×“ ××¢×•×œ×”! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××§×¦×•×¢×™×•×ª ×‘×¨××” ×’×‘×•×”×”"
          );
        } else {
          return AIFeedbackGenerator.positive(
            `××¢×•×œ×”! ×¢× ×”×¦×™×•×“ ×”×–×” × ×•×›×œ ×œ×‘× ×•×ª ××™××•× ×™× ×™×¢×™×œ×™× ×•××’×•×•× ×™×`
          );
        }
      },
    },

    helpText: "×‘×—×¨ ××ª ×”×¦×™×•×“ ×”×–××™×Ÿ ×•×”×›×™ × ×•×— ×œ×š ×œ×”×©×ª××© ×‘×•",
  },

  // ========== ğŸŒ³ OUTDOOR EQUIPMENT SPECIFIC - ×¦×™×•×“ ×—×•×¥ ×¡×¤×¦×™×¤×™ ==========
  {
    id: "outdoor_equipment_specific",
    title: "××™×–×” ×¦×™×•×“ ×™×© ×œ×š ×œ××™××•× ×™× ×‘×—×•×¥?",
    subtitle: "×¦×™×•×“ × ×™×™×“ ×•××‘×™×–×¨×™× ×œ×¤×¢×™×œ×•×ª ×‘×˜×‘×¢",
    question: "××™×–×” ×¦×™×•×“ ××ª×” ×™×›×•×œ ×œ×§×—×ª ××™×ª×š ×”×—×•×¦×”?",
    type: "multiple",
    icon: "ğŸŒ³",
    category: "essential",
    required: true,

    options: [
      {
        id: "bodyweight_outdoor",
        label: "×¨×§ ××©×§×œ ×’×•×£",
        description: "×”×˜×‘×¢ ×›××’×¨×© ×”××©×—×§×™×",
        image: require("../../assets/bodyweight.png"),
        metadata: { equipment: ["bodyweight"] },
        aiInsight: "×”×˜×‘×¢ ××¡×¤×§ ×›×œ ××” ×©×¦×¨×™×š ×œ××™××•×Ÿ ××•×©×œ×!",
      },
      {
        id: "resistance_bands_outdoor",
        label: "×’×•××™×•×ª ×”×ª× ×’×“×•×ª",
        description: "×§×œ×•×ª ×œ× ×©×™××”, ×™×¢×™×œ×•×ª ××§×¡×™××œ×™×ª",
        image: require("../../assets/resistance_bands.png"),
        metadata: { equipment: ["resistance_bands"] },
        aiInsight: "×”×¦×™×•×“ ×”×›×™ × ×™×™×“ ×•×¨×‘-×ª×›×œ×™×ª×™!",
      },
      {
        id: "trx_suspension",
        label: "×¨×¦×•×¢×•×ª TRX",
        description: "××™××•×Ÿ ×”×©×¢×™×” ×¢× ××©×§×œ ×’×•×£",
        image: require("../../assets/trx.png"),
        metadata: { equipment: ["trx"] },
        aiInsight: "××™××•×Ÿ ×¤×•× ×§×¦×™×•× ×œ×™ ××œ× ×‘×›×œ ××§×•×!",
      },
      {
        id: "portable_weights",
        label: "××©×§×•×œ×•×ª × ×™×™×“×•×ª",
        description: "×“××‘×œ×™× ×§×˜× ×™× ××• ×©×§×™ ×—×•×œ",
        image: require("../../assets/dumbbells.png"),
        metadata: { equipment: ["dumbbells"] },
        aiInsight: "×›×•×— × ×•×¡×£ ×œ××™××•× ×™× ×‘×˜×‘×¢!",
      },
      {
        id: "kettlebell_outdoor",
        label: "×§×˜×œ×‘×œ × ×™×™×“",
        description: "××©×§×•×œ×ª ××—×ª ×œ××™××•×Ÿ ×©×œ×",
        image: require("../../assets/kettlebell.png"),
        metadata: { equipment: ["kettlebell"] },
        aiInsight: "××™××•×Ÿ ×“×™× ××™ ×¢× × ×•×£ ××“×”×™×!",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const options = answer as SmartOption[];
        const count = Array.isArray(options) ? options.length : 0;

        if (count === 0) {
          return AIFeedbackGenerator.suggestion(
            "×‘×—×¨ ×œ×¤×—×•×ª ××¤×©×¨×•×ª ××—×ª ×œ××™××•× ×™× ×‘×—×•×¥"
          );
        } else if (options?.[0]?.id === "bodyweight_outdoor") {
          return AIFeedbackGenerator.positive(
            "××•×©×œ×! ××™××•× ×™× ×‘×˜×‘×¢ ×¢× ××©×§×œ ×’×•×£ ×–×” ×—×•×•×™×ª ×›×•×©×¨ ××“×”×™××”",
            "××•×•×™×¨ ×¦×— + ×©××© + ×¤×¢×™×œ×•×ª = ××ª×›×•×Ÿ ×× ×¦×—"
          );
        } else {
          return AIFeedbackGenerator.insight(
            "× ×”×“×¨! ×©×™×œ×•×‘ ×©×œ ×¦×™×•×“ × ×™×™×“ ×•×˜×‘×¢ ×™×•×¦×¨ ××™××•× ×™× ×™×™×—×•×“×™×™×"
          );
        }
      },
    },

    helpText: "×¦×™×•×“ × ×™×™×“ ×¤×•×ª×— ××¤×©×¨×•×™×•×ª ×œ××™××•× ×™× ×‘×›×œ ××§×•×",
  },

  // ×©××œ×” 2: ××˜×¨×” ×—×›××” ×¢× AI
  {
    id: "smart_goal",
    title: "××” ×”××˜×¨×” ×©×œ×š?",
    subtitle: "×‘×•××™ × ××§×“ ×‘×“×™×•×§ ×‘××” ×©×—×©×•×‘ ×œ×š",
    question: "××” ×”×›×™ ×—×©×•×‘ ×œ×š ×œ×”×©×™×’?",
    type: "goal_focused",
    icon: "ğŸ¯",
    category: "essential",
    required: true,

    options: [
      {
        id: "lose_weight",
        label: "×œ×¨×“×ª ×‘××©×§×œ",
        description: "×©×¨×™×¤×ª ×©×•×× ×™× ×•×™×¨×™×“×” ×‘××©×§×œ",
        metadata: {
          intensity: "medium",
          focus: ["cardio", "strength", "nutrition"],
        },
        aiInsight: "×©×™×œ×•×‘ ×©×œ ×§×¨×“×™×• ×•×›×•×— + ×ª×–×•× ×” × ×›×•× ×” = ×”×¦×œ×—×” ××•×‘×˜×—×ª!",
      },
      {
        id: "build_muscle",
        label: "×œ×‘× ×•×ª ×©×¨×™×¨×™×",
        description: "×¢×œ×™×” ×‘××¡×ª ×©×¨×™×¨ ×•×›×•×—",
        metadata: {
          intensity: "high",
          focus: ["strength", "hypertrophy", "nutrition"],
        },
        aiInsight: "×‘× ×™×™×ª ×©×¨×™×¨×™× ×“×•×¨×©×ª ×¢×§×‘×™×•×ª - ××‘×œ ×”×ª×•×¦××•×ª ××©×œ××•×ª!",
      },
      {
        id: "get_fit",
        label: "×œ×”×™×•×ª ×‘×›×•×©×¨",
        description: "×›×•×©×¨ ×›×œ×œ×™ ×•×—×™×•× ×™×•×ª",
        metadata: {
          intensity: "medium",
          focus: ["general_fitness", "endurance", "strength"],
        },
        aiInsight: "×›×•×©×¨ ×›×œ×œ×™ ×–×” ×”×‘×¡×™×¡ ×œ×›×œ ×“×‘×¨ ×˜×•×‘ ×‘×—×™×™×!",
      },
      {
        id: "feel_better",
        label: "×œ×”×¨×’×™×© ×˜×•×‘ ×™×•×ª×¨",
        description: "×‘×¨×™××•×ª × ×¤×©×™×ª ×•×¤×™×–×™×ª",
        metadata: {
          intensity: "low",
          focus: ["wellness", "mobility", "stress_relief"],
        },
        aiInsight: "×”×¡×¤×•×¨×˜ ×”×•× ×”×ª×¨×•×¤×” ×”×˜×‘×¢×™×ª ×”×›×™ ×˜×•×‘×” ×œ×’×•×£ ×•×œ× ×¤×©!",
      },
      {
        id: "get_strong",
        label: "×œ×”×™×•×ª ×—×–×§ ×™×•×ª×¨",
        description: "×›×•×— ×•×™×›×•×œ×ª ×¤×•× ×§×¦×™×•× ×œ×™×ª",
        metadata: {
          intensity: "high",
          focus: ["strength", "power", "functional"],
        },
        aiInsight: "×›×•×— ×¤×•× ×§×¦×™×•× ×œ×™ ×™×©×¤×¨ ××ª ××™×›×•×ª ×”×—×™×™× ×©×œ×š ×‘×›×œ ×ª×—×•×!",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        if (option.id === "lose_weight") {
          return AIFeedbackGenerator.positive(
            "××˜×¨×” ××¢×•×œ×”! × ×©×œ×‘ ××™××•× ×™ ×›×•×— ×¢× ×§×¨×“×™×• ×œ×ª×•×¦××•×ª ××§×¡×™××œ×™×•×ª",
            "80% ××”×™×¨×™×“×” ×‘××©×§×œ ××ª×—×™×œ×” ×‘××˜×‘×— - × ×ª×Ÿ ×œ×š ×˜×™×¤×™×!"
          );
        }

        if (option.id === "build_muscle") {
          return AIFeedbackGenerator.insight(
            "×‘× ×™×™×ª ×©×¨×™×¨×™× ×”×™× ××¡×¢ ××¨×’×©! × ××§×“ ×‘×ª×¨×’×™×œ×™× ××•×¨×›×‘×™× ×•×‘×”×¢××¡×” ××ª×§×“××ª"
          );
        }

        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          "× ×ª××™× ××ª ×”×ª×•×›× ×™×ª ×‘×“×™×•×§ ×œ××˜×¨×” ×©×œ×š"
        );
      },

      generateRecommendations: (answer, previousAnswers) => {
        const option = answer as SmartOption;
        if (option.id === "lose_weight") {
          return [
            "× ×ª×—×™×œ ×¢× 3-4 ××™××•× ×™× ×‘×©×‘×•×¢",
            "× ×©×œ×‘ ×§×¨×“×™×• ×•×›×•×— ×‘××•×¤×Ÿ ××™×˜×‘×™",
            "× ×ª××§×“ ×‘×ª×–×•× ×” ×‘×¨×™××”",
          ];
        }
        return [];
      },
    },

    helpText: "×”××˜×¨×” ×©×œ×š ×ª×§×‘×¢ ××ª ×›×œ ×”××¡×˜×¨×˜×’×™×”",
  },

  // ×©××œ×” 3: × ×™×¡×™×•×Ÿ ×—×›×
  {
    id: "experience_smart",
    title: "××” ×”× ×™×¡×™×•×Ÿ ×©×œ×š?",
    subtitle: "× ×›×™×¨ ××•×ª×š ×˜×•×‘ ×™×•×ª×¨",
    question: "××™×š ×ª××“×“ ××ª ×”× ×™×¡×™×•×Ÿ ×©×œ×š ×‘××™××•× ×™×?",
    type: "experience_assessment",
    icon: "ğŸ’ª",
    category: "essential",
    required: true,

    options: [
      {
        id: "complete_beginner",
        label: "××ª×—×™×œ ×œ×’××¨×™",
        description: "×—×“×© ×œ×¢×•×œ× ×”×¡×¤×•×¨×˜",
        metadata: {
          intensity: "low",
          focus: ["basics", "form", "habit_building"],
        },
        aiInsight: "×›×•×œ× ×”×ª×—×™×œ×• ××™×¤×©×”×•! × ×ª××§×“ ×‘×™×¡×•×“×•×ª ×”×—×©×•×‘×™×",
      },
      {
        id: "some_experience",
        label: "×™×© ×œ×™ ×§×¦×ª × ×™×¡×™×•×Ÿ",
        description: "×”×ª××× ×ª×™ ×‘×¢×‘×¨ ××• ××ª×××Ÿ ××“×™ ×¤×¢×",
        metadata: { intensity: "medium", focus: ["progression", "technique"] },
        aiInsight: "×™×© ×œ×š ×‘×¡×™×¡ ×˜×•×‘! × ×‘× ×” ×¢×œ×™×• ×•× ×©×¤×¨ ××ª ×”×˜×›× ×™×§×”",
      },
      {
        id: "experienced",
        label: "×× ×•×¡×”",
        description: "××ª×××Ÿ ×‘×§×‘×™×¢×•×ª ×›×‘×¨ ×ª×§×•×¤×”",
        metadata: { intensity: "high", focus: ["advanced", "specialization"] },
        aiInsight: "××¦×•×™×Ÿ! × ×•×›×œ ×œ×¢×‘×•×“ ×¢×œ ×˜×›× ×™×§×•×ª ××ª×§×“××•×ª",
      },
      {
        id: "athlete",
        label: "×¡×¤×•×¨×˜××™",
        description: "×¨××” ×’×‘×•×”×” ××• ×ª×—×¨×•×ª×™×ª",
        metadata: {
          intensity: "high",
          focus: ["performance", "periodization"],
        },
        aiInsight: "×¨××” ×’×‘×•×”×”! × ××§×“ ×‘×‘×™×¦×•×¢×™× ×•×¤×¨×™×¦×ª ××’×‘×œ×•×ª",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        if (option.id === "complete_beginner") {
          return AIFeedbackGenerator.positive(
            "××•×©×œ×! ×”××¡×¢ ×”×›×™ ××¨×’×© ××ª×—×™×œ ×¢×›×©×™×•",
            "×”××©×¤×˜ ×”×›×™ ×—×©×•×‘: '×”×ª×—×œ×” ×˜×•×‘×” ×”×™× ×—×¦×™ ××”×”×¦×œ×—×”'"
          );
        }

        if (option.id === "athlete") {
          return AIFeedbackGenerator.insight(
            "××¨×©×™×! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××ª×§×“××•×ª ×××•×“ ×•××•×ª×××•×ª ×œ×‘×™×¦×•×¢×™×"
          );
        }

        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          "× ×ª××™× ××ª ×¨××ª ×”×§×•×©×™ ×‘×“×™×•×§ ×œ× ×™×¡×™×•×Ÿ ×©×œ×š"
        );
      },
    },

    helpText: "×›× ×•×ª ×¤×” ×—×©×•×‘×” - ×–×” ×™×§×‘×¢ ××ª ×¨××ª ×”×§×•×©×™",
  },

  // ×©××œ×” 4: ×–××Ÿ ×•×–××™× ×•×ª ×—×›××”
  {
    id: "time_smart",
    title: "×›××” ×–××Ÿ ×™×© ×œ×š?",
    subtitle: "× ××¦× ××ª ×”×§×¦×‘ ×”××•×©×œ× ×‘×©×‘×™×œ×š",
    question: "×›××” ×–××Ÿ ××ª×” ×™×›×•×œ ×œ×”×§×“×™×© ×œ××™××•×Ÿ?",
    type: "time_preference",
    icon: "â°",
    category: "essential",
    required: true,

    options: [
      {
        id: "time_15_30",
        label: "15-30 ×“×§×•×ª",
        description: "××™××•× ×™× ×§×¦×¨×™× ×•×™×¢×™×œ×™×",
        metadata: { intensity: "high", focus: ["hiit", "express"] },
        aiInsight: "××™××•× ×™× ×§×¦×¨×™× ×™×›×•×œ×™× ×œ×”×™×•×ª ×¡×•×¤×¨ ×™×¢×™×œ×™× ×¢× ×”×’×™×©×” ×”× ×›×•× ×”!",
      },
      {
        id: "time_30_45",
        label: "30-45 ×“×§×•×ª",
        description: "×”×–××Ÿ ×”×¡×˜× ×“×¨×˜×™ ×”××•××œ×¥",
        metadata: { intensity: "medium", focus: ["balanced", "standard"] },
        aiInsight: "×”×–××Ÿ ×”××•×©×œ×! ××¡×¤×™×§ ×œ××™××•×Ÿ ×™×¡×•×“×™ ×•×œ× ×™×•×ª×¨ ××“×™",
      },
      {
        id: "time_45_60",
        label: "45-60 ×“×§×•×ª",
        description: "××™××•×Ÿ ××§×™×£ ×•×™×¡×•×“×™",
        metadata: { intensity: "medium", focus: ["comprehensive", "detailed"] },
        aiInsight: "× ×•×›×œ ×œ×™×¦×•×¨ ××™××•× ×™× ××§×™×¤×™× ×¢× ×—×™××•× ×•×§×™×¨×•×¨ ××œ××™×",
      },
      {
        id: "time_flexible",
        label: "×–×” ××©×ª× ×”",
        description: "×œ×¤×¢××™× ×™×•×ª×¨, ×œ×¤×¢××™× ×¤×—×•×ª",
        metadata: { intensity: "adaptive", focus: ["flexible", "adaptive"] },
        aiInsight: "× ×›×™×Ÿ ×œ×š ××¤×©×¨×•×™×•×ª ×’××™×©×•×ª - ××™××•×Ÿ ×§×¦×¨ ××¨×•×š ×œ×¤×™ ×”×¦×•×¨×š",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        if (option.id === "time_15_30") {
          return AIFeedbackGenerator.positive(
            "××¢×•×œ×”! ××™××•× ×™× ×§×¦×¨×™× ×•×™×¢×™×œ×™× ×™×›×•×œ×™× ×œ×”×™×•×ª ×××•×“ ×™×¢×™×œ×™×",
            "HIIT ×©×œ 20 ×“×§×•×ª ×™×›×•×œ ×œ×©×¨×•×£ ×™×•×ª×¨ ×§×œ×•×¨×™×•×ª ×××©×¨ ×©×¢×” ×©×œ ×§×¨×“×™×• ××™×˜×™"
          );
        }

        if (option.id === "time_flexible") {
          return AIFeedbackGenerator.insight(
            "×—×©×™×‘×” ×—×›××”! × ×›×™×Ÿ ×œ×š ×ª×•×›× ×™×•×ª ×’××™×©×•×ª ×©××ª××™××•×ª ×œ×›×œ ×™×•×"
          );
        }

        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          "× ×ª××™× ××ª ×”××™××•× ×™× ×‘×“×™×•×§ ×œ×–××Ÿ ×©×™×© ×œ×š"
        );
      },
    },

    helpText: "×ª×—×©×•×‘ ×¢×œ ×××•×¦×¢ - ×›××” ×–××Ÿ ×‘×“×¨×š ×›×œ×œ ×™×© ×œ×š",
  },

  // ×©××œ×” 5: ××™×§×•× ×•×¦×™×•×“ ×—×›×
  {
    id: "location_equipment_smart",
    title: "××™×¤×” ×•×¢× ××” ×ª×ª×××Ÿ?",
    subtitle: "× ×›×™×¨ ××ª ×”××©××‘×™× ×©×™×© ×œ×š",
    question: "××™×–×” ×¦×™×•×“ ×–××™×Ÿ ×œ×š ×œ××™××•× ×™×?",
    type: "location_equipment",
    icon: "ğŸ‹ï¸",
    category: "essential",
    required: true,

    options: [
      {
        id: "home_basic",
        label: "×‘×™×ª - ×¦×™×•×“ ×‘×¡×™×¡×™",
        description: "××©×§×œ ×’×•×£, ××•×œ×™ ××©×§×•×œ×•×ª ×§×˜× ×•×ª",
        metadata: {
          equipment: ["none", "bodyweight"],
          intensity: "medium",
          focus: ["functional", "bodyweight"],
        },
        aiInsight: "××™××•× ×™ ××©×§×œ ×’×•×£ ×™×›×•×œ×™× ×œ×”×™×•×ª ×××“ ×™×¢×™×œ×™×! ×¤×©×•×˜ ×•×—×›×.",
      },
      {
        id: "home_equipped",
        label: "×‘×™×ª - ×¦×™×•×“ ××ª×§×“×",
        description: "××©×§×•×œ×•×ª, ××ª×§× ×™×, ×¦×™×•×“ ××§×¦×•×¢×™",
        metadata: {
          equipment: ["dumbbells", "barbell", "bench", "resistance_bands"],
          intensity: "high",
          focus: ["strength", "hypertrophy"],
        },
        aiInsight: "×—×“×¨ ×›×•×©×¨ ×¤×¨×˜×™! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××§×¦×•×¢×™×•×ª ×œ×’××¨×™",
      },
      {
        id: "gym_full",
        label: "×—×“×¨ ×›×•×©×¨ ××œ×",
        description: "×’×™×©×” ×œ×›×œ ×”×¦×™×•×“ ×”××§×¦×•×¢×™",
        metadata: {
          equipment: [
            "barbell",
            "dumbbells",
            "cable_machine",
            "leg_press",
            "bench",
            "squat_rack",
          ],
          intensity: "high",
          focus: ["strength", "hypertrophy", "specialization"],
        },
        aiInsight: "×”×©××™×™× ×”× ×”×’×‘×•×œ! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××ª×§×“××•×ª ×•××’×•×•× ×•×ª",
      },
      {
        id: "outdoor_natural",
        label: "×—×•×¥ ×•××˜×‘×¢",
        description: "×¤××¨×§×™×, ×—×•×¤×™×, ××¡×œ×•×œ×™ ×¨×™×¦×”",
        metadata: {
          equipment: ["none", "bodyweight", "nature"],
          intensity: "varied",
          focus: ["functional", "cardio", "natural_movement"],
        },
        aiInsight: "×”×˜×‘×¢ ×”×•× ×—×“×¨ ×”×›×•×©×¨ ×”×›×™ ×™×¤×”! × ×©×œ×‘ ×¤×¢×™×œ×•×ª ×—×•×¥ ××’×•×•× ×ª",
      },
      {
        id: "mixed_flexible",
        label: "×’××™×© - ×ª×œ×•×™ ×‘××¦×‘",
        description: "×œ×¤×¢××™× ×‘×™×ª, ×œ×¤×¢××™× ×—×“×¨ ×›×•×©×¨",
        metadata: {
          equipment: ["dumbbells", "barbell", "bodyweight", "cable_machine"],
          intensity: "adaptive",
          focus: ["flexibility", "adaptable"],
        },
        aiInsight: "×’××™×©×•×ª ×–×” ×›×•×—! × ×›×™×Ÿ ×ª×•×›× ×™×•×ª ×©××ª××™××•×ª ×œ×›×œ ××¦×‘",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        if (option.id === "home_basic") {
          return AIFeedbackGenerator.positive(
            "××¢×•×œ×”! ××™××•× ×™ ××©×§×œ ×’×•×£ ×™×›×•×œ×™× ×œ×”×™×•×ª ×¡×•×¤×¨ ×™×¢×™×œ×™×",
            "×”×›×•×— ×”×›×™ ×’×“×•×œ ×©×œ×š ×”×•× ×”××•×˜×™×‘×¦×™×” - ×œ× ×”×¦×™×•×“!"
          );
        }

        if (option.id === "gym_full") {
          return AIFeedbackGenerator.insight(
            "× ×”×“×¨! ×¢× ×›×œ ×”×¦×™×•×“ ×”×–×” × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ×‘×¨××” ××§×¦×•×¢×™×ª"
          );
        }

        if (option.id === "mixed_flexible") {
          return AIFeedbackGenerator.suggestion(
            "×—×›× ×××•×“! ×’××™×©×•×ª ×‘××§×•× ×”××™××•×Ÿ × ×•×ª× ×ª ×—×•×¤×© ×’×“×•×œ",
            "× ×›×™×Ÿ ×œ×š ×ª×•×›× ×™×•×ª ×©×¢×•×‘×“×•×ª ×‘×›×œ ××§×•×"
          );
        }

        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          "× ×‘× ×” ×ª×•×›× ×™×ª ×©××ª××™××” ×‘×“×™×•×§ ×œ××©××‘×™× ×©×œ×š"
        );
      },

      generateRecommendations: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        // ×©××™×¨×ª × ×ª×•× ×™ ×”×¦×™×•×“ ×œ×©×™××•×© ×××•×—×¨ ×™×•×ª×¨
        if (option.metadata?.equipment) {
          return [`×¦×™×•×“ ×–××™×Ÿ: ${option.metadata.equipment.join(", ")}`];
        }

        return [];
      },
    },

    helpText: "×–×” ×™×§×‘×¢ ××ª ×¡×•×’×™ ×”×ª×¨×’×™×œ×™× ×©× ×•×›×œ ×œ×›×œ×•×œ ×‘×ª×•×›× ×™×ª",
  },

  // ×©××œ×” 6: ×ª×“×™×¨×•×ª ×—×›××”
  {
    id: "frequency_smart",
    title: "×›××” ×¤×¢××™× ×‘×©×‘×•×¢?",
    subtitle: "× ××¦× ××ª ×”×§×¦×‘ ×”× ×›×•×Ÿ ×œ×š",
    question: "×›××” ×¤×¢××™× ×‘×©×‘×•×¢ ××ª×” ×™×›×•×œ ×œ×”×ª×××Ÿ?",
    type: "single",
    icon: "ğŸ—“ï¸",
    category: "essential",
    required: true,

    options: [
      {
        id: "freq_2",
        label: "×¤×¢××™×™× ×‘×©×‘×•×¢",
        description: "×‘×¡×™×¡ ×˜×•×‘ ×œ×”×ª×—×œ×”",
        metadata: { intensity: "medium", focus: ["full_body", "basics"] },
        aiInsight: "×¤×¢××™×™× ×‘×©×‘×•×¢ ×–×” ×‘×¡×™×¡ ××¢×•×œ×”! ×”××•×¨×— ×—×™×™× ×”×‘×¨×™× ××ª×—×™×œ ×¤×”",
      },
      {
        id: "freq_3",
        label: "3 ×¤×¢××™× ×‘×©×‘×•×¢",
        description: "×”×§×¦×‘ ×”××™×“×™××œ×™ ×œ××¨×‘×™×ª ×”×× ×©×™×",
        metadata: { intensity: "medium", focus: ["split_routine", "balanced"] },
        aiInsight: "×”×§×¦×‘ ×”×–×”×‘! 3 ×¤×¢××™× ×‘×©×‘×•×¢ ×–×” ××•×©×œ× ×œ×ª×•×¦××•×ª ×•×œ×× ×™×¢×ª ×©×—×™×§×”",
      },
      {
        id: "freq_4_5",
        label: "4-5 ×¤×¢××™× ×‘×©×‘×•×¢",
        description: "×¨××” ×’×‘×•×”×” ×•××—×•×™×‘×•×ª",
        metadata: { intensity: "high", focus: ["split_routine", "advanced"] },
        aiInsight: "×¨××” ×’×‘×•×”×”! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××ª××—×•×ª ×œ×›×œ ×§×‘×•×¦×ª ×©×¨×™×¨×™×",
      },
      {
        id: "freq_daily",
        label: "×›××¢×˜ ×›×œ ×™×•×",
        description: "××™××•× ×™× ×”× ×—×œ×§ ××”×—×™×™× ×©×œ×™",
        metadata: { intensity: "varied", focus: ["periodization", "recovery"] },
        aiInsight: "××¨×©×™×! × ×—×©×•×‘ ×¢×œ ××—×–×•×¨×™×•×ª ×•×× ×•×—×” ×›×“×™ ×œ×× ×•×¢ ×©×—×™×§×”",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const option = answer as SmartOption;

        if (option.id === "freq_2") {
          return AIFeedbackGenerator.positive(
            "×”×ª×—×œ×” ×—×›××”! ×¢×“×™×£ ××™×›×•×ª ×¢×œ ×›××•×ª",
            "×“×™×¡×¦×™×¤×œ×™× ×” ×¢× 2 ××™××•× ×™× ×˜×•×‘×” ×-5 ××™××•× ×™× ×œ× ×¢×§×‘×™×™×"
          );
        }

        if (option.id === "freq_daily") {
          return AIFeedbackGenerator.suggestion(
            "××¢×•×œ×”! × ×•×¡×™×£ ×™××™ ×”×ª××•×©×©×•×ª ×¤×¢×™×œ×” ×œ×ª×•×›× ×™×ª",
            "×× ×•×—×” ×”×™× ×—×œ×§ ××”××™××•×Ÿ - ×‘×™××™ ×”×‘×™× ×™×™× × ×¢×©×” ×™×•×’×” ××• ×”×œ×™×›×”"
          );
        }

        return AIFeedbackGenerator.positive(
          `${option.aiInsight}`,
          "× ×‘× ×” ×ª×•×›× ×™×ª ×©××ª××™××” ×‘×“×™×•×§ ×œ×§×¦×‘ ×©×œ×š"
        );
      },
    },

    helpText: "×—×©×•×‘ ×¢×œ ××” ×©×‘×××ª ×¨×™××œ×™×¡×˜×™ ×œ×˜×•×•×— ×”××¨×•×š",
  },

  // ×©××œ×” 6: ××’×‘×œ×•×ª ×•×‘×¢×™×•×ª
  {
    id: "limitations_smart",
    title: "×™×© ××’×‘×œ×•×ª?",
    subtitle: "× ×“××’ ×©×”××™××•× ×™× ×™×”×™×• ×‘×˜×•×—×™× ×•××ª××™××™×",
    question: "×™×© ×œ×š ××’×‘×œ×•×ª ××• ×‘×¢×™×•×ª ×©×›×“××™ ×©× ×“×¢ ×¢×œ×™×”×Ÿ?",
    type: "multiple",
    icon: "âš•ï¸",
    category: "essential",
    required: false,

    options: [
      {
        id: "back_pain",
        label: "×›××‘×™ ×’×‘",
        description: "×‘×¢×™×•×ª ×¢× ×”×’×‘ ×”×ª×—×ª×•×Ÿ ××• ×”×¢×œ×™×•×Ÿ",
        metadata: { modifications: ["core_focus", "avoid_heavy_deadlifts"] },
        aiInsight: "× ××§×“ ×‘×—×™×–×•×§ ×”×œ×™×‘×” ×•×‘×©×™×¤×•×¨ ×”×™×¦×™×‘×” - ×–×” ×™×¢×–×•×¨ ×××•×“!",
      },
      {
        id: "knee_issues",
        label: "×‘×¢×™×•×ª ×‘×¨×›×™×™×",
        description: "×›××‘×™× ××• ×¤×¦×™×¢×•×ª ×‘×¨×›×™×™×",
        metadata: { modifications: ["low_impact", "strengthen_quads"] },
        aiInsight: "× ×‘×—×¨ ×ª×¨×’×™×œ×™× ×™×“×™×“×•×ª×™×™× ×œ×‘×¨×›×™×™× ×•× ×—×–×§ ××ª ×”×©×¨×™×¨×™× ××¡×‘×™×‘",
      },
      {
        id: "shoulder_problems",
        label: "×‘×¢×™×•×ª ×›×ª×¤×™×™×",
        description: "×›××‘×™× ××• ××’×‘×œ×•×ª ×ª× ×•×¢×”",
        metadata: { modifications: ["avoid_overhead", "mobility_focus"] },
        aiInsight: "× ×¢×‘×•×“ ×¢×œ × ×™×™×“×•×ª ×”×›×ª×¤×™×™× ×•× ×× ×¢ ××ª×¨×’×™×œ×™× ××¢×œ ×”×¨××©",
      },
      {
        id: "time_pressure",
        label: "×œ×—×¥ ×–××Ÿ",
        description: "×§×©×” ×œ×™ ×œ××¦×•× ×–××Ÿ ×§×‘×•×¢",
        metadata: { modifications: ["flexible_timing", "quick_workouts"] },
        aiInsight: "× ×›×™×Ÿ ×œ×š ××™××•× ×™× ×’××™×©×™× ×©××¤×©×¨ ×œ×¢×©×•×ª ×‘×›×œ ×–××Ÿ",
      },
      {
        id: "beginner_anxiety",
        label: "×—×¨×“×” ×©×œ ××ª×—×™×œ",
        description: "××¤×—×“ ×œ×”×ª×—×™×œ ××• ×œ× ×‘×˜×•×— ×‘×¢×¦××™",
        metadata: { modifications: ["gentle_start", "confidence_building"] },
        aiInsight: "×›×•×œ× ×”×™×• ×¤×¢× ××ª×—×™×œ×™×! × ×ª×—×™×œ ×‘×¢×“×™× ×•×ª ×•× ×‘× ×” ×‘×™×˜×—×•×Ÿ",
      },
      {
        id: "no_limitations",
        label: "××™×Ÿ ××’×‘×œ×•×ª ××™×•×—×“×•×ª",
        description: "××¨×’×™×© ×˜×•×‘ ×•××•×›×Ÿ ×œ×›×œ ×“×‘×¨",
        metadata: { modifications: [] },
        aiInsight: "××¢×•×œ×”! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××’×•×•× ×•×ª ×•×œ×™×”× ×•×ª ××”×—×•×¤×©",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const options = answer as SmartOption[];

        if (!Array.isArray(options)) {
          return AIFeedbackGenerator.positive("×ª×•×“×” ×¢×œ ×”×©×™×ª×•×£!");
        }

        if (options.some((opt) => opt.id === "no_limitations")) {
          return AIFeedbackGenerator.positive(
            "× ×”×“×¨! × ×•×›×œ ×œ×™×¦×•×¨ ×ª×•×›× ×™×•×ª ××’×•×•× ×•×ª ×•×××ª×’×¨×•×ª",
            "×¢×“×™×™×Ÿ × ×ª×—×™×œ ×‘×–×”×™×¨×•×ª ×•× ×‘× ×” ×‘×”×“×¨×’×”"
          );
        }

        if (options.length > 0) {
          return AIFeedbackGenerator.insight(
            "×ª×•×“×” ×¢×œ ×”×›× ×•×ª! × ×ª××™× ××ª ×”××™××•× ×™× ×‘×“×™×•×§ ×œ××’×‘×œ×•×ª ×©×œ×š"
          );
        }

        return AIFeedbackGenerator.positive("×”×‘× ×ª×™, × ××©×™×š!");
      },
    },

    helpText: "××¤×©×¨ ×œ×‘×—×•×¨ ×›××” ××¤×©×¨×•×™×•×ª ××• ×œ×“×œ×’",
  },

  // ×©××œ×” 7: ×”×¢×“×¤×•×ª ××™××•×Ÿ
  {
    id: "workout_preferences",
    title: "××™×š ××ª×” ××•×”×‘ ×œ×”×ª×××Ÿ?",
    subtitle: "× ×›×™×¨ ××ª ×”×¡×’× ×•×Ÿ ×©×œ×š",
    question: "××™×–×” ×¡×’× ×•×Ÿ ××™××•×Ÿ ××ª××™× ×œ×š ×™×•×ª×¨?",
    type: "multiple",
    icon: "ğŸµ",
    category: "optimization",
    required: false,

    options: [
      {
        id: "high_intensity",
        label: "××•×”×‘ ××ª×’×¨×™× ×§×©×™×",
        description: "×›×œ ××™××•×Ÿ ×¦×¨×™×š ×œ×“×—×•×£ ××•×ª×™ ×œ×’×‘×•×œ",
        metadata: { style: ["hiit", "challenging", "intense"] },
        aiInsight: "×× ×¨×’×™×” ×’×‘×•×”×”! × ×›×™×Ÿ ×œ×š ××™××•× ×™× ×©×‘×××ª ×™×“×—×¤×• ××•×ª×š",
      },
      {
        id: "steady_pace",
        label: "××¢×“×™×£ ×§×¦×‘ ×§×‘×•×¢",
        description: "××•×”×‘ ××™××•× ×™× ×™×¦×™×‘×™× ×•××‘×•×§×¨×™×",
        metadata: { style: ["steady", "controlled", "methodical"] },
        aiInsight: "×’×™×©×” ×—×›××”! ×”×ª××“×” ×•×§×‘×™×¢×•×ª ×”×Ÿ ×”××¤×ª×— ×œ×”×¦×œ×—×”",
      },
      {
        id: "variety_lover",
        label: "××•×”×‘ ×’×™×•×•×Ÿ",
        description: "×›×œ ××™××•×Ÿ ×¦×¨×™×š ×œ×”×™×•×ª ×©×•× ×”",
        metadata: { style: ["varied", "creative", "diverse"] },
        aiInsight: "× ×•×›×œ ×œ×™×¦×•×¨ ×œ×š ××™××•× ×™× ××’×•×•× ×™× ×©×œ× ×™×©×¢×××• ×œ×¢×•×œ×!",
      },
      {
        id: "music_motivated",
        label: "××™××•×Ÿ ×¢× ××•×–×™×§×”",
        description: "×”××•×–×™×§×” × ×•×ª× ×ª ×œ×™ ×× ×¨×’×™×”",
        metadata: { style: ["rhythmic", "energetic", "music_based"] },
        aiInsight: "×”××•×–×™×§×” ×”×™× ×“×œ×§ ××¦×•×™×Ÿ! × ×›×œ×•×œ ×”××œ×¦×•×ª ×¤×œ×™×™×œ×™×¡×˜",
      },
      {
        id: "quiet_focused",
        label: "××™××•×Ÿ ×©×§×˜ ×•×××•×§×“",
        description: "××•×”×‘ ×œ×”×ª×¨×›×– ×•×œ×—×©×•×‘ ×¢×œ ×”×˜×›× ×™×§×”",
        metadata: { style: ["mindful", "technical", "focused"] },
        aiInsight: "×’×™×©×” ××“×™×˜×˜×™×‘×™×ª! × ××§×“ ×‘×˜×›× ×™×§×” ×•×—×™×‘×•×¨ ×’×•×£-× ×¤×©",
      },
      {
        id: "social_workout",
        label: "××•×”×‘ ××™××•× ×™× ×—×‘×¨×ª×™×™×",
        description: "×™×•×ª×¨ ×›×™×£ ×œ×”×ª×××Ÿ ×¢× ××—×¨×™×",
        metadata: { style: ["social", "group", "partner"] },
        aiInsight: "×× ×¨×’×™×” ×—×‘×¨×ª×™×ª! × ×›×œ×•×œ ×¨×¢×™×•× ×•×ª ×œ××™××•× ×™× ×¢× ×—×‘×¨×™×",
      },
    ],

    aiLogic: {
      generateFeedback: (answer, previousAnswers) => {
        const options = answer as SmartOption[];

        if (!Array.isArray(options) || options.length === 0) {
          return AIFeedbackGenerator.positive("×‘×¡×“×¨, × ××©×™×š!");
        }

        const styles = options.map((opt) => opt.label).join(", ");
        return AIFeedbackGenerator.insight(
          `×”×‘× ×ª×™ ××ª ×”×¡×’× ×•×Ÿ ×©×œ×š: ${styles}. × ×›×™×Ÿ ××™××•× ×™× ×©×‘×××ª ×™×ª××™××• ×œ×š!`
        );
      },
    },

    helpText: "××¤×©×¨ ×œ×‘×—×•×¨ ×›××” ××¤×©×¨×•×™×•×ª ×©××ª××™××•×ª ×œ×š",
  },
];

// ×¤×•× ×§×¦×™×•×ª ×œ× ×™×”×•×œ ×”×©××œ×•×Ÿ ×”×—×›×
export class SmartQuestionnaireManager {
  private answers: Map<string, any> = new Map();
  private currentQuestionIndex = 0;
  private questionsToShow: string[] = [];

  constructor() {
    // ×”×ª×—×œ ×¢× ×”×©××œ×•×ª ×”×—×™×•× ×™×•×ª - ×ª××™×“ ×™×¦×•×¨ ×¨×©×™××” ×—×“×©×”
    this.questionsToShow = SMART_QUESTIONNAIRE.filter(
      (q) => q.category === "essential"
    )
      .map((q) => q.id)
      .slice(); // ×™×¦×•×¨ ×¢×•×ª×§ ×—×“×© ×©×œ ×”××¢×¨×š
  }

  getCurrentQuestion(): SmartQuestion | null {
    // ×‘×“×™×§×” ×•× ×™×§×•×™ ××’×¨×¡×™×‘×™ ×©×œ ×”×©××œ×•×ª ×”×–×¨×•×ª
    const beforeCount = this.questionsToShow.length;
    this.questionsToShow = this.questionsToShow.filter(
      (id) => !["home_motivation", "time_flexibility"].includes(id)
    );
    const afterCount = this.questionsToShow.length;

    if (this.currentQuestionIndex >= this.questionsToShow.length) {
      return null;
    }

    const questionId = this.questionsToShow[this.currentQuestionIndex];

    const foundQuestion = SMART_QUESTIONNAIRE.find((q) => q.id === questionId);

    return foundQuestion || null;
  }

  answerQuestion(questionId: string, answer: any): AIFeedback | null {
    this.answers.set(questionId, answer);

    const question = SMART_QUESTIONNAIRE.find((q) => q.id === questionId);
    if (!question) return null;

    // ×™×¦×•×¨ ××©×•×‘ AI
    const feedback = question.aiLogic.generateFeedback(
      answer,
      Object.fromEntries(this.answers)
    );

    // ×¢×“×›×Ÿ ×¨×©×™××ª ×©××œ×•×ª ×¢×ª×™×“×™×•×ª ×× ×¦×¨×™×š
    if (question.aiLogic.influenceNextQuestions) {
      const newQuestions = question.aiLogic.influenceNextQuestions(answer);

      if (newQuestions && newQuestions.length > 0) {
        this.questionsToShow.push(...newQuestions);
      }
    }

    return feedback;
  }

  nextQuestion(): boolean {
    this.currentQuestionIndex++;

    return this.currentQuestionIndex < this.questionsToShow.length;
  }

  getProgress(): { current: number; total: number; percentage: number } {
    return {
      current: this.currentQuestionIndex + 1,
      total: this.questionsToShow.length,
      percentage: Math.round(
        ((this.currentQuestionIndex + 1) / this.questionsToShow.length) * 100
      ),
    };
  }

  getAllAnswers(): Record<string, any> {
    const answers = Object.fromEntries(this.answers);

    // ×”××¨×ª × ×ª×•× ×™ ×¦×™×•×“ ×œ×¤×•×¨××˜ ×”× ×›×•×Ÿ - ×ª××™×›×” ×‘×©× ×™ ×”×©××•×ª
    let locationEquipment = null;
    if (answers.location_equipment_smart) {
      locationEquipment = answers.location_equipment_smart as SmartOption;
    } else if (answers.location_equipment) {
      locationEquipment = answers.location_equipment as SmartOption;
    }

    if (locationEquipment) {
      console.log(
        "ğŸ” SmartQuestionnaireManager - processing location equipment:",
        locationEquipment
      );

      // ×”×’×“×¨×ª ×¦×™×•×“ ×œ×¤×™ ×”×‘×—×™×¨×”
      if (locationEquipment.metadata?.equipment) {
        answers.available_equipment = locationEquipment.metadata.equipment;

        console.log(
          "ğŸ” SmartQuestionnaireManager - setting available_equipment:",
          locationEquipment.metadata.equipment
        );

        // ×ª××™××•×ª ×œ××—×•×¨ - ×”×•×¡×¤×ª home_equipment ×•-gym_equipment
        if (locationEquipment.id.includes("home")) {
          answers.home_equipment = locationEquipment.metadata.equipment;
          answers.gym_equipment = [];
          console.log(
            "ğŸ” SmartQuestionnaireManager - home detected, setting home_equipment:",
            locationEquipment.metadata.equipment
          );
        } else if (locationEquipment.id.includes("gym")) {
          answers.gym_equipment = locationEquipment.metadata.equipment;
          answers.home_equipment = [];
          console.log(
            "ğŸ” SmartQuestionnaireManager - gym detected, setting gym_equipment:",
            locationEquipment.metadata.equipment
          );
        } else {
          // ×œ××§×¨×™× ××¢×•×¨×‘×™×
          answers.home_equipment = locationEquipment.metadata.equipment.filter(
            (eq) =>
              ["none", "bodyweight", "dumbbells", "resistance_bands"].includes(
                eq
              )
          );
          answers.gym_equipment = locationEquipment.metadata.equipment.filter(
            (eq) =>
              ["barbell", "cable_machine", "leg_press", "squat_rack"].includes(
                eq
              )
          );
          console.log(
            "ğŸ” SmartQuestionnaireManager - mixed detected, home:",
            answers.home_equipment,
            "gym:",
            answers.gym_equipment
          );
        }
      }

      // ×”×’×“×¨×ª location ×œ×¤×™ ×”×‘×—×™×¨×”
      if (locationEquipment.id.includes("home")) {
        answers.location = "×‘×™×ª";
      } else if (locationEquipment.id.includes("gym")) {
        answers.location = "×—×“×¨ ×›×•×©×¨";
      } else {
        answers.location = "×’× ×•×’×";
      }

      console.log(
        "ğŸ” SmartQuestionnaireManager - setting location:",
        answers.location
      );
    }

    // ×›×¢×ª ×‘×“×™×§×” ×× ×”××ª×¨×’×œ ×‘×—×¨ ×¦×™×•×“ ××‘×œ ×œ× × ×•×¦×¨×• × ×›×•×Ÿ ×”× ×ª×•× ×™×
    // ×‘×•××• × ×‘×“×§ ×× ×™×© ×‘×¢×™×” ×¢× location_equipment ××•×œ location_equipment_smart
    if (
      !answers.available_equipment ||
      answers.available_equipment.length === 0
    ) {
      console.log(
        "âš ï¸ SmartQuestionnaireManager - No available_equipment found, checking alternatives..."
      );

      // ×ª××™×›×” ××•×¨×—×‘×ª - ×‘×“×™×§×” ×©×œ ×”×©××œ×” ×”×™×©× ×” location_equipment
      const oldLocationEquipment = answers.location_equipment as SmartOption;
      if (oldLocationEquipment?.metadata?.equipment) {
        console.log(
          "ğŸ”§ SmartQuestionnaireManager - Found equipment in location_equipment, using it:",
          oldLocationEquipment.metadata.equipment
        );
        answers.available_equipment = oldLocationEquipment.metadata.equipment;

        if (oldLocationEquipment.id.includes("home")) {
          answers.home_equipment = oldLocationEquipment.metadata.equipment;
          answers.gym_equipment = [];
          answers.location = "×‘×™×ª";
        } else if (oldLocationEquipment.id.includes("gym")) {
          answers.gym_equipment = oldLocationEquipment.metadata.equipment;
          answers.home_equipment = [];
          answers.location = "×—×“×¨ ×›×•×©×¨";
        }
      }
    }

    console.log(
      "ğŸ” SmartQuestionnaireManager.getAllAnswers - final answers:",
      answers
    );
    return answers;
  }

  isComplete(): boolean {
    return this.currentQuestionIndex >= this.questionsToShow.length;
  }
}

export default SMART_QUESTIONNAIRE;
// Force refresh
