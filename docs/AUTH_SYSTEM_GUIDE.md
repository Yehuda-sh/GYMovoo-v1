# Authentication System Guide - מדריך מערכת ההתחברות

## 🔐 איך מערכת ההתחברות עובדת

### ניווט אוטומטי

מערכת ההתחברות עובדת אוטומטית:

1. **פתיחת האפליקציה** → WelcomeScreen בודק אוטומטית אם יש משתמש מחובר
2. **משתמש מחובר** → ניווט ישיר למסך הבית (MainApp)
3. **משתמש לא מחובר** → הצגת מסך ברוכים הבאים

### התחברות אוטומטית (Auto-Login)

כשפותחים את האפליקציה, Zustand טוען אוטומטית את נתוני המשתמש האחרון מ-AsyncStorage.

### התנתקות מלאה (Complete Logout)

כשמתנתקים, מוחקים **הכל** מהאחסון המקומי:

- נתוני משתמש בסיסיים
- נתוני שאלון ותוצאות
- נתוני אימון והיסטוריה
- הגדרות והעדפות

## 📱 שימוש במסכים

### בדיקת מצב התחברות:

```typescript
import { useAuthState } from '../stores/userStore';

function MyComponent() {
  const { user, isLoggedIn, hasQuestionnaire } = useAuthState();

  if (!isLoggedIn) {
    return <LoginScreen />;
  }

  if (!hasQuestionnaire) {
    return <UnifiedQuestionnaireScreen />;
  }

  return <MainApp />;
}
```

## 🔄 התנהגות מצופה

### ✅ התחברות רגילה:

1. פותח את האפליקציה
2. Zustand טוען את המשתמש מ-AsyncStorage
3. אם יש משתמש → עובר למסך הראשי
4. אם אין → עובר למסך התחברות

### ✅ התנתקות מלאה:

1. לוחץ "התנתק" בפרופיל
2. מופיע אישור
3. מאשר → מוחק הכל מ-AsyncStorage
4. עובר למסך הפתיחה

## 🚨 נקודות חשובות

### אבטחה:

- לא נשמרות סיסמאות ב-AsyncStorage
- רק טוקנים או מידע לא רגיש
- מחיקה מלאה בהתנתקות

### ביצועים:

- טעינה מהירה - נתונים שמורים מקומית
- ניקוי יעיל עם multiRemove
- לוגים מפורטים לדיבוג

---

**המערכת מוכנה ועובדת כמו שצריך! 🎉**
